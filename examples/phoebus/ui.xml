<?xml version="1.0" encoding="UTF-8"?>
<zee
	xmlns:zee="http://www.gammazeta.net/zee/core/"
	xmlns:zdm="http://www.gammazeta.net/zee/zdm/"
	xmlns:zui="http://www.gammazeta.net/zee/zui/">
	<zee:components>
		<zee:media id="media" remote="true" />
		<zee:media id="notifications" />
	</zee:components>
	<zui:application id="phoebus" title="Phoebus" width="800" height="480" position="center" layout="vertical">
		<zee:param name="iconTheme" value="Humanity-Dark" />

		<zui:container id="mainbar">
			<zui:container id="controls">
				<zui:button id="aPrev">Previous</zui:button>
				<zui:togglebutton id="aPlayPause" value="Play" value2="Pause" />
				<zui:button id="aStop">Stop</zui:button>
				<zui:button id="aNext">Next</zui:button>
			</zui:container>
			<zui:container id="nowplaying" layout="vertical">
				<zui:text id="status" value="No song selected." />
				<zui:progress id="seekbar" />
			</zui:container>
			<zui:container>
				<zui:button id="aClear" icon=":/icons/clear.svg" />
				<zui:button id="reloadStyle" icon=":/icons/reload.svg" />
			</zui:container>
		</zui:container>
		<zui:container id="extended">
			<zui:list id="sidebar">
				<zui:item value="queueScreen" icon=":/icons/nowplaying.svg">Now Playing</zui:item>
				<zui:item value="libraryScreen" icon="stock_music-library">Library</zui:item>
				<zui:item value="streamScreen" icon="stock_internet">Radio</zui:item>
			</zui:list>
			<zui:screens id="screen" default="libraryScreen">
				<zui:screen name="queueScreen">
					<zui:list model="media" id="queue" />
				</zui:screen>
				<zui:screen name="libraryScreen" layout="vertical">
					<zui:container>
						<zui:label value="Artist" />
						<zui:label value="Genre" />
						<zui:label value="Album" />
					</zui:container>
					<zui:folder id="browser" uri="/home/ghetzel/music/lib" select="extended" />
				</zui:screen>
				<zui:screen name="streamScreen">
					<zui:list id="streams">
						<zui:item value="http://yp.shoutcast.com/sbin/tunein-station.pls?id=1091">SmoothJazz.com</zui:item>
					</zui:list>
				</zui:screen>
			</zui:screens>
		</zui:container>
	</zui:application>

	<zee:events>
		<zee:connect from="media.timeChanged" to="seekbar.setValue" direct="false" />
		<zee:connect from="media.durationChanged" to="seekbar.setMaximum" direct="false" />
		<zee:connect from="media.queuedSongChanged" to="queue.setCurrentIndex" />
		<zee:connect from="media.sourceChanged" to="status.setText" />
		<zee:connect from="media.reachedBookmark" to="zee.log" direct="false" />
		<zee:connect from="queue.activated" to="media.changeTo" direct="false" />
		<zee:connect from="streams.activated" to="media.playSource" direct="false" />
		<zee:connect from="browser.activated" to="media.enqueue" />
		<zee:connect from="aPlayPause.toggled" to="media.togglePlay" direct="false" />
		<zee:connect from="aStop.clicked" to="media.stop" />
		<zee:connect from="aPrev.clicked" to="media.previous" />
		<zee:connect from="aNext.clicked" to="media.next" />
		<zee:connect from="aMark.clicked" to="media.setBookmark" via="media.position" direct="false" /> 
<!--
	Segfaults if this isn't registered as a slot (fault in ZMethodObject?)
		<zee:connect from="aMark.clicked" to="media.setBookmark" via="media.position" direct="false" /> 

-->
		<zee:connect from="compact.checked" to="extended.hide" />
		<zee:connect from="compact.unchecked" to="extended.show" />
		<zee:connect from="aClear.clicked" to="media.clear" />
		<zee:connect from="reloadStyle.clicked" to="zee.reloadStyleSheet" />
		<zee:connect from="media.stopped" to="seekbar.reset" />
<!--	Resets activated song?
		<zee:connect from="media.stopped" to="status.reset" /> 
-->
		<zee:connect from="sidebar.selected" to="screen.jump" direct="false" />
	</zee:events>
</zee>
